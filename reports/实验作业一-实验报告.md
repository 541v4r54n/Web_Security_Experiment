# 实验作业一：实验平台搭建（简版报告）

## 1. 实验目标

搭建一个可本地部署运行的 Web 应用作为实验平台，满足：

- 具备简单且必要的页面
- 用户管理模块：注册、登录/登出、用户信息维护、用户删除、用户操作记录
- 会话管理机制
- 核心业务功能可运行与操作
- 同时支持 HTTP 与 HTTPS 访问
- 采用 git 管理源码（本仓库）

## 2. 产品/系统概述

平台名称：WebSec Lab（图片水印管理系统）

核心业务：
- 多用户上传图片
- 输入水印文字
- 自动生成水印图并下载

支撑模块：
- 用户注册/登录/登出
- 个人资料维护
- 账号删除（自助）
- 用户管理（Admin）：用户列表、删除用户（首次注册用户默认为 Admin）
- 操作审计日志（audit logs）

## 3. 技术选型

- Web 前端：Bootstrap 5 + Vue3（CDN）
- Web 后端：Python + Flask（MVC 风格按模块拆分：`auth/images/labs`）
- Web 服务器/应用服务器：
  - HTTP：Waitress（WSGI Server）
  - HTTPS：Flask `ssl_context` + 自签名证书（实验用途）
- 数据库：SQLite（`var/app.db`）
- 数据持久化：Python `sqlite3` + 参数化查询（无 ORM）
- 其他：CSRF 防护、密码哈希（Werkzeug）
- 操作系统：Windows / Linux 均可部署运行

## 4. 部署与运行（本地）

方式 A（无需 mise）：

- `python tools/bootstrap.py setup`

方式 B（使用 mise，可选）：

- `mise trust`
- `mise run setup`

启动：

- HTTP：`python tools/bootstrap.py run-http`（或 `mise run run-http`）→ `http://127.0.0.1:5000`
- HTTPS：`python tools/bootstrap.py run-https`（或 `mise run run-https`）→ `https://127.0.0.1:5443`

说明：HTTPS 为自签名证书，浏览器提示“不受信任”属于正常现象（仅用于实验）。

## 5. 功能使用说明（概述）

- 注册：`/register`
- 登录：`/login`
- 上传水印：`/images` → 选择图片并填写水印文字
- 下载：在列表进入详情页 `/images/<id>` → 下载水印图
- 操作记录：`/audit`
- 用户管理：`/users`（Admin）

Admin 说明：首次注册的账号默认成为 Admin，用于满足“用户管理（新增/删除）”实验要求。

## 6. 源码托管（GitHub / Gitee）

本项目已按 git 仓库组织，可直接推送到 GitHub / Gitee：

- 新建远程仓库 → 添加 remote → `git push` 推送代码
- 将仓库地址填写到实验报告/作业提交处

## 7. 小结

平台满足作业一对实验平台搭建的要求，可用于后续作业二的攻防实验与安全测试。
